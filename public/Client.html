<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    <link href="/Libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <link href="client.css" rel="stylesheet" />

    <script src="/Scripts/jquery-2.1.3.js"></script>
    <script src="/Scripts/angular.js"></script>
    <script src="/Scripts/angular-animate.js"></script>
    <script src="/Scripts/angular-route.js"></script>
    <script src="/Scripts/angular-sanitize.js"></script>
    <script src="/Scripts/angular-translate.js"></script>
    <script src="/Scripts/angular-ui/ui-bootstrap.js"></script>
    <script src="/Scripts/angular-ui/ui-bootstrap-tpls.js"></script>
    <script src="/Scripts/toastr.js"></script>
    <script src="/Scripts/moment.js"></script>
    <script src="/Scripts/moment-timezone.min.js"></script>
    <script src="/Scripts/moment-with-locales.min.js"></script>
    <script src="/Libs/bootstrap/js/bootstrap.min.js"></script>
    <script src="/Scripts/ngplus-overlay.js"></script>

    <script src="/app/blocks/logger/logger.module.js"></script>
    <script src="/app/blocks/logger/logger.js"></script>


    <script src="/app/blocks/exception/exception.module.js"></script>
    <script src="/app/blocks/exception/exception-handler.provider.js"></script>
    <script src="/app/blocks/exception/exception.js"></script>
    <script src="/app/blocks/router/router.module.js"></script>
    <script src="/app/blocks/router/routehelper.js"></script>

    <script src="/app/app.module.js"></script>
    <script src="/app/app.filters.js"></script>
    <script src="/app/app.config.js"></script>
    <script src="/app/app.js"></script>



    <script src="/app/core/core.module.js"></script>
    <script src="/app/core/constants.js"></script>
    <script src="/app/core/config.js"></script>
    <script src="/app/core/dataservice.js"></script>

    <script src="/app/entries/entries.module.js"></script>
    <script src="/app/entries/entries.js"></script>
    <script src="/app/entries/comments.module.js"></script>
    <script src="/app/entries/comments.js"></script>

    <script src="app/accounts/accounts.module.js"></script>
    <script src="app/accounts/accounts.js"></script>

</head>
<body data-ng-app="app" data-ng-controller="App as redditApp">
<div data-ng-controller="Entries as vm">
    <!--menu-->
    <div class="navbar navbar-default navbar-static-top navbar-custom" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">{{ 'TITLE' | translate }}</a>
            </div>

            <div class="navbar-collapse collapse">
                <div data-ng-controller="Accounts as vmAccounts">
                    <ul class="nav navbar-nav">
                        <li><a href="#" data-ng-click="vm.open()">New Entry</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Change Language<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a ng-click="redditApp.changeLanguage('de')">Deutsch</a></li>
                                <li><a ng-click="redditApp.changeLanguage('en')">English</a></li>
                            </ul>
                        </li>
                        <li><a href="#" data-ng-click="redditApp.showAboutDialog()">About</a></li>
                        <li><a href="#" data-ng-click="vmAccounts.showAccountRegisterDialog()">Register</a></li>
                        <li><a href="#" data-ng-click="vmAccounts.showLoginDialog()">Login</a></li>
                    </ul>
                </div>
            </div><!--/.nav-collapse -->
        </div>
    </div>

    <div class="container">
        <!-- core -->
        <div class="entry" data-ng-repeat="entry in vm.entries">
            <div class="entryvote" data-ng-include="'votetemplate.html'">
            </div>
            <div class="entrydetails">
                <div class="entrytitle">
                    <a href="{{entry.url}}">{{entry.title}}</a>
                </div>
                <div class="entrysubmitdetails">submitted {{entry.createTime | fromNow}} by {{entry.author}}</div>
                <div class="entryallcomments">
                    <a class="" data-ng-click="entry.showComments = !entry.showComments">
                        <div class="showhidecomments glyphicon glyphicon-comment">
                            <span>{{entry.comments.length}} comments</span>
                        </div>
                    </a>
                    <div data-ng-controller="Comments as vmEntryComments">
                        <div ng-init="entry.replyTemplate='emptytemplate.html'">
                        </div>

                        <a class="" data-ng-click="entry.replyTemplate='entrycommenteditortemplate.html'">
                            <div class="showhidecommenteditor glyphicon glyphicon-bullhorn">
                                <span> reply</span>
                            </div>
                        </a>
                        <div data-ng-include="entry.replyTemplate">
                        </div>
                    </div>
                </div>

                <div class="comments">
                    <div class="comment" data-ng-repeat="comment in entry.comments"
                         data-ng-show="entry.showComments"
                         data-ng-include="'commenttemplate.html'"
                         data-ng-controller="Comments as vmComments">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/ng-template" id="newentry.html">
        <div close="cancel()">
            <div class="modal-header">
                <h3>{{'NEWLINKTITLE' | translate}}</h3>
                <h4>{{'NEWLINKSUBTITLE' | translate}}</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" id="entryTitle" placeholder="{{'DUMMYLINKTITLE' | translate}}" ng-model="entryTitle">
                    </div>
                    <div class="form-group">
                        <input type="url" class="form-control" id="entryUrl" placeholder="{{'DUMMYLINKURL' | translate}}" ng-model="entryUrl">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success glyphicon glyphicon-cloud-upload" ng-disabled="entryTitle.length === 0 || entryUrl.length === 0" ng-click="ok()"> Ok</button>
                <button class="btn glyphicon glyphicon-remove" ng-click="cancel()"> Cancel</button>
            </div>
        </div>
    </script>

<script type="text/ng-template" id="about.html">
        <div close="cancel()">
            <div class="modal-header">
                <h3>{{'ABOUT' | translate}}</h3>
                <h4>{{'ABOUTTEXT' | translate}}</h4>
            </div>
            <div class="modal-body">
                <div class="aboutImageDiv">
                    <img class="aboutImage" src="content/About.jpg" />
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn glyphicon glyphicon-heart" ng-click="ok()"> Ok</button>
            </div>
        </div>
    </script>


<script type="text/ng-template" id="votetemplate.html">
        <div class="vote upvote glyphicon glyphicon-thumbs-up"
             data-ng-click="vm.vote(entry, 1)">
        </div>
        <div class="totalvote">{{entry.rating.value}}</div>
        <div class="vote downvote glyphicon glyphicon-thumbs-down" data-ng-click="vm.vote(entry, -1)">
        </div>
    </script>

<script type="text/ng-template" id="commenttemplate.html">
        <div class="commentvote">
            <div class="upvote glyphicon glyphicon-thumbs-up"
                 data-ng-click="vm.vote(comment, 1)">
            </div>
            <div class="totalvote">{{comment.rating.value}}</div>
            <div class="downvote glyphicon glyphicon-thumbs-down" data-ng-click="vm.vote(comment, -1)">
            </div>
        </div>
        <div class="commentdetails">
            <div class="commenttext">{{comment.text}}</div>
            <div class="commentsubmitdetails">submitted {{comment.createTime | fromNow}} by {{comment.author}}</div>
        </div>
        <div class="commentallcomments">
            <a class="" data-ng-click="comment.showComments = !comment.showComments">
                <div class="showhidecomments glyphicon glyphicon-comment">
                    <span>{{comment.comments.length}} comments</span>
                </div>
            </a>
            <div ng-init="comment.replyTemplate='emptytemplate.html'" />
            <a class="" data-ng-click="comment.replyTemplate='commenteditortemplate.html'">
                <div class="showhidecommenteditor glyphicon glyphicon-bullhorn">
                    <span> reply</span>
                </div>
            </a>
            <div data-ng-include="comment.replyTemplate">

            </div>
        </div>
        <div class="comment" data-ng-repeat="comment in comment.comments"
             data-ng-include="'commenttemplate.html'"
             data-ng-show="$parent.$parent.comment.showComments">
        </div>

    </script>

<script type="text/ng-template" id="commenteditortemplate.html">
        <form class="form-horizontal" role="form">
            <div class="form-group col-sm-4 ">
                <textarea class="form-control" maxlength="255" name="commentText" ng-model="vmComments.newComment"></textarea>
            </div>
            <div class="form-group col-sm-4 col-sm-offset-2">
                <div class="buttondisplay pull-right">
                    <button class="btn" ng-disabled="vmComments.newComment.length===0" ng-click="vmComments.addNew(comment);comment.replyTemplate='emptytemplate.html'">Reply</button>
                    <button class="btn" ng-click="comment.replyTemplate='emptytemplate.html'">Cancel</button>
                </div>
            </div>
        </form>
    </script>

<script type="text/ng-template" id="entrycommenteditortemplate.html">
        <form class="form-horizontal" role="form">
            <div class="form-group col-sm-4">
                <textarea class="form-control" maxlength="255" name="commentText" ng-model="vmEntryComments.newComment"></textarea>
            </div>
            <div class="form-group col-sm-4 clearfixed">
                <div class="buttondisplay pull-right">
                    <button class="btn" ng-disabled="vmEntryComments.newComment.length===0" ng-click="vmEntryComments.addNew(entry);entry.replyTemplate='emptytemplate.html'">Reply</button>
                    <button class="btn" ng-click="entry.replyTemplate='emptytemplate.html'">Cancel</button>
                </div>
            </div>
        </form>
    </script>

<script type="text/ng-template" id="emptytemplate.html">
    </script>

<script type="text/ng-template" id="accountregister.html">
        <div data-ng-controller="Accounts as vmRegisterAccount">
            <form class="form-horizontal" role="form">
                <div close="cancel()">
                    <div class="modal-header">
                        <h3>{{'REGISTER' | translate}}</h3>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <input class="form-control" id="inputUserName" placeholder="Username" ng-model="vmRegisterAccount.formInfo.userName">
                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" id="inputPassword1" placeholder="Password" ng-model="vmRegisterAccount.formInfo.password1">

                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" id="inputPassword2" placeholder="Repeat Password" ng-model="vmRegisterAccount.formInfo.password2">
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                            </div>
                        </div>
                        <span>{{vmRegisterAccount.formInfo}}</span>
                        <span ng-show="userNameRequired">{{vmRegisterAccount.userNameRequired}}</span>
                        <span ng-show="password1Required">{{vmRegisterAccount.password1Required}}</span>
                        <span ng-show="password2Required">{{vmRegisterAccount.password2Required}}</span>
                        <span ng-show="passwordNotEqual">{{vmRegisterAccount.passwordNotEqual}}</span>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success" ng-click="vmRegisterAccount.registerUser()">{{'REGISTER' | translate}}</button>
                    </div>
                </div>
            </form>
        </div>
    </script>


<script type="text/ng-template" id="login.html">
        <div data-ng-controller="Accounts as vmLoginAccount">
            <form class="form-horizontal" role="form">
                <div close="cancel()">
                    <div class="modal-header">
                        <h3>{{'LOGIN' | translate}}</h3>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <input class="form-control" id="inputUserName" placeholder="Username" ng-model="vmLoginAccount.userName">
                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" id="inputPassword" placeholder="Password" ng-model="vmLoginAccount.password">

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success" ng-disabled="vmLoginAccount.userName.length === 0 || vmLoginAccount.password.length === 0" ng-click="vmLoginAccount.login().then(ok())">{{'LOGIN' | translate}}</button>
                    </div>
                </div>
            </form>
        </div>
    </script>

</body>
</html>
